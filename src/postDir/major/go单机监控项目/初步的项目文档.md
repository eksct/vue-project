# 📑 单机监控系统（Web 端）项目文档

## 一、项目目标

开发一个轻量级 **单机服务器监控系统**，用户可通过浏览器实时查看本机状态（CPU、内存、磁盘、网络等），并支持用户认证、历史数据存储、告警与可视化展示。  
项目以 **低成本、易安装、轻量化** 为目标，分阶段迭代。

---

## 二、功能需求

### 1. 必备功能

- 用户登录（JWT 鉴权）
    
- 系统基础信息（主机名、IP、系统版本、内核、运行时长）
    
- CPU / 内存 / 磁盘 / 网络 实时监控
    
- Web 仪表盘可视化
    

### 2. 进阶功能

- 历史数据存储与查询（MySQL）
    
- 进程监控（Top 占用）
    
- 服务状态检测（Nginx / MySQL / Redis 等）
    
- WebUI 优化（仪表盘 + 曲线图）
    

### 3. 高阶功能

- 告警通知（阈值设定 + 邮件/Webhook）
    
- 用户与权限管理（多角色）
    
- 多节点扩展（Agent + Server 模式）
    
- 插件化扩展机制
    

---

## 三、分阶段规划

> 假设一个 2~3 人的小团队，每人每天 6-7 小时开发量。  
> 工期可按 **人天** 来预估。

---

### **阶段 1：MVP 最小可用版本**

**工期：2 周（10 人天左右）**

#### 功能目标

- 用户认证（JWT 登录、注册）
    
- 采集并展示系统信息（gopsutil）
    
- 实时监控 CPU、内存、磁盘、网络
    
- 简单 Web 前端展示（Echarts/Chart.js）
    

#### 具体任务

1. **后端**
    
    - Gin + Gorm + MySQL 项目框架搭建
        
    - 用户表设计、登录接口、JWT 中间件
        
    - gopsutil 调用：CPU/内存/磁盘/网络实时数据采集
        
    - API：`/api/metrics` 提供实时数据
        
2. **前端（可内嵌 HTML/Echarts）**
    
    - 登录页（Token 存储在 LocalStorage）
        
    - 仪表盘（CPU/内存/磁盘/网络 折线图）
        
3. **数据库**
    
    - users 表
        
    - metrics_xxx 表（预留）
        

👉 阶段结束后：  
用户能登录系统 → 打开仪表盘 → 实时查看服务器运行状态。

---

### **阶段 2：进阶功能**

**工期：3~~4 周（15~~20 人天）**

#### 功能目标

- 历史数据存储（按分钟定时采集存 DB）
    
- 指标趋势查询（最近 1h / 24h / 7d）
    
- 进程监控（CPU/内存占用 Top 10）
    
- 服务状态检测（端口检测 + ps 检查）
    
- UI 优化（图表切换、区块化布局）
    

#### 具体任务

1. **后端**
    
    - 定时采集器（cron + gopsutil）写入 MySQL
        
    - API：历史数据查询（带时间范围）
        
    - API：进程列表（分页、排序）
        
    - API：服务检测（支持配置服务端口/进程名）
        
2. **前端**
    
    - 历史数据趋势图（折线图/柱状图）
        
    - 进程列表（表格分页、排序）
        
    - 服务状态（运行/停止标识）
        
3. **数据库**
    
    - metrics_cpu/mem/disk/net → 按时间存储
        
    - processes 表（可选）
        
    - services 表（服务配置）
        

👉 阶段结束后：  
用户可查看历史趋势 → 进程占用 → 常见服务运行状态。

---

### **阶段 3：高阶功能**

**工期：4~~6 周（20~~30 人天）**

#### 功能目标

- 告警机制（CPU/内存/磁盘阈值报警 → 邮件/钉钉/企业微信）
    
- 用户权限管理（多角色支持）
    
- 多节点扩展（Agent + Server 模式）
    
- 插件化扩展（安装/卸载监控模块）
    

#### 具体任务

1. **后端**
    
    - 告警规则表（阈值、通知方式）
        
    - 告警任务（定时检测 → 触发通知）
        
    - 用户表扩展（角色字段，管理员/普通用户）
        
    - 多节点模式（Agent 上报数据 → Server 聚合展示）
        
2. **前端**
    
    - 告警设置（阈值配置）
        
    - 告警历史列表
        
    - 多节点切换/总览
        
    - 插件管理（模块启停）
        
3. **数据库**
    
    - alerts 表（告警记录）
        
    - nodes 表（多节点支持）
        

👉 阶段结束后：  
系统不仅能本机监控，还能监控多台机器，并支持告警与扩展。

---

## 四、工期总览

|阶段|功能|工期|主要内容|
|---|---|---|---|
|阶段 1|MVP 版本|2 周|用户认证 + 实时监控 + 简单仪表盘|
|阶段 2|进阶功能|3~4 周|历史数据 + 进程监控 + 服务检测 + UI 优化|
|阶段 3|高阶功能|4~6 周|告警机制 + 多角色 + 多节点 + 插件化|

总工期：约 **2 ~ 3 个月**（小团队可控范围）。

---

## 五、技术选型说明

- **后端框架**：Gin（API 服务）
    
- **数据库 ORM**：Gorm + MySQL
    
- **配置管理**：Viper
    
- **认证授权**：JWT（dgrijalva/jwt-go）
    
- **监控采集**：gopsutil
    
- **前端展示**：Echarts / Chart.js（可后期 Vue/React）
    
- **任务调度**：Go `cron` 库
    
