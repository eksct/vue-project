Java 反射（Reflection）是 Java 提供的一种强大机制，允许程序在运行时动态地获取类的信息并操作类的属性和方法。通过反射，可以在运行时检查类、接口、字段和方法，甚至可以调用方法或修改字段的值。
## **1. 反射的核心类**

Java 反射的核心类位于 `java.lang.reflect` 包中，主要包括：

|类名|描述|
|---|---|
|`Class`|表示类或接口，是反射的核心类。|
|`Field`|表示类的字段（成员变量）。|
|`Method`|表示类的方法。|
|`Constructor`|表示类的构造方法。|
|`Modifier`|提供对类和成员访问修饰符的解码。|
|`Array`|提供动态创建和访问数组的静态方法。|
## **2. 获取 `Class` 对象**

`Class` 对象是反射的入口，可以通过以下方式获取：
```java
//通过类名获取
Class<?> clazz = Class.forName("java.lang.String");
//通过对象获取
String str = "Hello";
Class<?> clazz = str.getClass();
//通过 .class 语法获取
Class<?> clazz = String.class;
```
## **3. 获取类的信息**
```java
//获取类名
String className = clazz.getName();  // 全限定名
String simpleName = clazz.getSimpleName();  // 简单类名
//获取修饰符
int modifiers = clazz.getModifiers();
String modifierStr = Modifier.toString(modifiers);  // 如 "public final"
//获取父类
Class<?> superClass = clazz.getSuperclass();
//获取实现的接口
Class<?>[] interfaces = clazz.getInterfaces();
```
## **4. 获取字段信息**
```java
//获取所有字段
Field[] fields = clazz.getDeclaredFields();
for (Field field : fields) {
    System.out.println(field.getName());
}
//获取指定字段
Field field = clazz.getDeclaredField("fieldName");
//获取字段类型
Class<?> fieldType = field.getType();
//获取和设置字段值
Object obj = clazz.getDeclaredConstructor().newInstance();
field.setAccessible(true);  // 设置可访问私有字段
field.set(obj, value);  // 设置字段值
Object value = field.get(obj);  // 获取字段值
```
## **5. 获取方法信息**
```java
//获取所有方法
Method[] methods = clazz.getDeclaredMethods();
for (Method method : methods) {
    System.out.println(method.getName());
}
//获取指定方法
//**`parameterTypes`**：这是一个 `Class` 类型的数组，表示方法的参数类型。如果方法有多个参数，你需要为每个参数指定其类型。
Method method = clazz.getDeclaredMethod("methodName", parameterTypes);
//调用方法
Object obj = clazz.getDeclaredConstructor().newInstance();
method.setAccessible(true);  // 设置可访问私有方法
Object result = method.invoke(obj, args);  // 调用方法
```
## **6. 获取构造方法信息**
```java
//获取所有构造方法
Constructor<?>[] constructors = clazz.getDeclaredConstructors();
for (Constructor<?> constructor : constructors) {
    System.out.println(constructor.getName());
}
//获取指定构造方法
Constructor<?> constructor = clazz.getDeclaredConstructor(parameterTypes);
//创建对象
Object obj = constructor.newInstance(args);
```
## **7. 动态创建和操作数组**
```java
//创建数组
Object array = Array.newInstance(String.class, 10);  // 创建长度为 10 的 String 数组
Array.set(array, 0, "Hello");
//设置和获取数组元素
String element = (String) Array.get(array, 0);
```
## **8. 反射的应用场景**

- **动态加载类**：在运行时加载类并调用其方法。
    
- **框架开发**：如 Spring 框架通过反射实现依赖注入。
    
- **测试工具**：如 JUnit 通过反射调用测试方法。
    
- **序列化和反序列化**：通过反射获取对象的字段和方法。
## **9. 反射的优缺点**

### **优点**

- 灵活性：可以在运行时动态操作类。
    
- 强大的功能：可以访问私有成员和方法。
    

### **缺点**

- 性能开销：反射操作比直接调用慢。
    
- 安全性问题：可以绕过访问控制，破坏封装性。
    
- 代码可读性差：反射代码通常难以理解和维护。