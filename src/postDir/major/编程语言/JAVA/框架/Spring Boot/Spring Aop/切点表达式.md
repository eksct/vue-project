Spring 的 AOP 中的一个核心概念是切点（Pointcut），切点表达式定义通知（Advice）执行的范围。它基于 AspectJ 的切点表达式语言，允许开发者通过方法签名、包名、类名等条件精确地指定目标方法.
可以使用通配符
**注意：切点表达式纵使匹配对象不一，但最后匹配的都是方法。**
## **1. 切点表达式的基本语法**

切点表达式的通用语法如下：
```java
execution(修饰符 返回类型 包名.类名.方法名(参数类型)
```

- **修饰符**：可选，如 `public`、`private` 等。
    
- **返回类型**：方法的返回类型，如 `void`、`String`、`*`（表示任意返回类型）。
    
- **包名**：类的包路径，如 `com.example.service`。
    
- **类名**：类的名称，如 `UserService`。
    
- **方法名**：方法的名称，如 `getUser`。
    
- **参数类型**：方法的参数类型，如 `(String, int)`。
## **2. 常用的切点表达式**

### **2.1 拦截指定包下的所有方法**

```java
execution(* com.example.service.*.*(..))
```

- `*`：匹配任意返回类型。
    
- `com.example.service.*`：匹配 `com.example.service` 包下的所有类。
    
- `*`：匹配类中的所有方法。
    
- `(..)`：匹配任意参数。
    

### **2.2 拦截指定类下的所有方法**

```java
execution(* com.example.service.UserService.*(..))
```

- `UserService`：匹配 `UserService` 类中的所有方法。
### **2.3 拦截指定方法**

```java
execution(* com.example.service.UserService.getUser(..))

```
- `getUser`：匹配 `UserService` 类中的 `getUser` 方法。
### **2.4 拦截指定参数类型的方法**

```java
execution(* com.example.service.UserService.getUser(String, int))

```
- `(String, int)`：匹配参数为 `String` 和 `int` 类型的 `getUser` 方法。
### **2.5 拦截公共方法**

```java
execution(public * com.example.service.*.*(..))
```

- `public`：匹配所有公共方法。
    

### **2.6 拦截返回类型为 `void` 的方法**

```java
execution(void com.example.service.*.*(..))
```

- `void`：匹配返回类型为 `void` 的方法。

可以使用 `&&`、`||`、`!` 等逻辑运算符组合多个切点表达式。

## **3. 切点表达式的其他用法**

### **3.1 使用 `within`、`@within`**

`within` 用于匹配指定类或包下的所有方法。
```java
within(com.example.service.*)
```
`@within`用于匹配存在指定注解的**类**中的所有方法
```java
@within(MyAnnotation)
```

### **3.2 使用 `this` 、 `target`、`@target`**

- `this`：用于匹配调用的目标对象类型。它匹配当前目标对象是指定类型的情况。
    
- `target`：用于匹配调用的目标对象的类型。与 `this` 的不同之处是 `target` 匹配的是代理对象类型，而 `this` 匹配的是目标对象类型。
- `@target`：用于匹配指定注解存在的目标对象（类或方法）。它与 `@within` 类似，但应用于目标对象。
```java
//会匹配 `UserService` 类型的对象执行的方法。
this(com.example.service.UserService)
//匹配所有 `MyService` 类型的代理对象类型。
target(com.example.service.UserService)
//匹配所有目标对象类或方法上带有 `@UserService` 注解的方法。
@target(UserService)
```
### **3.3 使用 `args、@args`**

- `args` 用于匹配方法参数的类型。
- `@args`用于匹配方法参数中具有指定注解的参数。
```java
args(String, int)
@args(String, int)
```
### **3.4 使用 `@annotation`**
用于匹配带有特定注解的方法，匹配所有
```java
@annotation(cache)
```